const upgrades = {
    normal: {
        1: {
            row: 1, col: -1,
            title: "Sharper touches",
            desc: "Increase damage per tap",
            effect: x => (0.15 * (x ** 1.5) + 1) ** getUpgradeEffect("reincarnation", 5),
            effectDisplay: x => format(x * 100) + "%",
            req: () => game.level >= 5,
            reqDisplay: "Level 5",
            cost: x => 500 * 3 ** x,
        },
        2: {
            row: 1, col: -2,
            title: "Stronger companions",
            desc: "Increase damage per second",
            effect: x => (0.3 * (x ** 1.5) + 1) ** getUpgradeEffect("reincarnation", 4),
            effectDisplay: x => format(x * 100) + "%",
            req: () => game.level >= 10,
            reqDisplay: "Level 10",
            cost: x => 50000 * 5 ** x,
        },
        3: {
            row: 1, col: 1,
            title: "Duplication glitch",
            desc: "Chance to 5x an ore's cash value",
            effect: x => x * 0.05,
            effectDisplay: x => format(x * 100) + "%",
            req: () => game.level >= 50,
            reqDisplay: "Level 50",
            cost: x => 1e7 * 5 ** x,
        },
        4: {
            row: 2, col: -2,
            title: "Artifact detector",
            desc: "Increase artifact drop chance",
            effect: x => x * 0.01 + 0.05,
            effectDisplay: x => format(x * 100) + "%",
            req: () => game.level >= 15,
            reqDisplay: "Level 15",
            cost: x => x >= 95 ? Infinity : 100000 * 5 ** x,
        },
        5: {
            row: 2, col: -1,
            title: "Artifact blessing",
            desc: "Increase artifact gilding multiplier",
            effect: x => 0.15 * (x ** 1.4) + 1,
            effectDisplay: x => format(x * 100) + "%",
            req: () => game.level >= 20,
            reqDisplay: "Level 20",
            cost: x => 1e6 * 4 ** x,
        },
        6: {
            row: 2, col: 0,
            title: "Artifact luck",
            desc: "Increase maximum artifact gilding limit",
            effect: x => 250 + 15 * x,
            effectDisplay: x => format(x) + "%",
            req: () => game.level >= 30,
            reqDisplay: "Level 30",
            cost: x => 7777777 * 7 ** x,
        },
        7: {
            row: 3, col: -1,
            title: "Bribe the gods",
            desc: "Increase AP gain",
            effect: x => 0.15 * (x ** 1.4) + 1,
            effectDisplay: x => format(x * 100) + "%",
            visible: () => game.ascensionPoints > 0,
            req: () => game.ascensionPoints >= 100,
            reqDisplay: "100 AP",
            cost: x => 1250 * 1.5 ** x,
            costType: "artifacts",
            keepOn: ["ascension"],
        },
        8: {
            row: 3, col: 0,
            title: "Money distribution",
            desc: "Decrease tool upgrade cost",
            effect: x => 0.8 ** x,
            effectDisplay: x => x < 0.1 ? "/" + format(1 / x) : format(x * 100) + "%",
            visible: () => game.ascensionPoints > 0,
            req: () => game.ascensionPoints >= 200,
            reqDisplay: "200 AP",
            cost: x => 800 * 1.25 ** x,
            costType: "artifacts",
            keepOn: ["ascension"],
        },
        9: {
            row: 1, col: 2,
            title: "Super duplication",
            desc: "Increase ore duplication stack limit<br/>(Chance decays for each duplication)",
            effect: x => x + 1,
            effectDisplay: x => format(x) + "x",
            req: () => game.level >= 150,
            reqDisplay: "Level 150",
            cost: x => 1e9 * 100 ** x,
        },
        10: {
            row: 1, col: 0,
            title: "Just an ordinary upgrade",
            desc: "Increase all damage",
            effect: x => 0.1 * (x ** 1.35) + 1,
            effectDisplay: x => format(x * 100) + "%",
            req: () => game.level >= 250,
            reqDisplay: "Level 250",
            cost: x => 1e10 * 10 ** x,
        },
        11: {
            row: 2, col: 1,
            title: "Artifact spender",
            desc: "Increase bulk artifact spending limit<br/>Spend more artifact for better gilding",
            effect: x => (x ** 2) * 2 + 1,
            effectDisplay: x => format(x),
            req: () => game.level >= 350,
            reqDisplay: "Level 350",
            cost: x => 1e9 * 10000 ** x,
        },
        12: {
            row: 2, col: 2,
            title: "Artifact duplication",
            desc: "Add +X to artifact gain for each ore duplication that happens on the same ore",
            effect: x => x,
            effectDisplay: x => format(x),
            req: () => game.level >= 500,
            reqDisplay: "Level 500",
            cost: x => 1e12 * 1000 ** x,
        },
        13: {
            row: 3, col: 1,
            title: "Exploding ore",
            desc: "Decrease ore duplicating chance decay",
            effect: x => {
                const lerp = (a, b, x) => a + (b - a) * x;
                return 0.5 * lerp(0.95 ** x, 8 / (x + 1e-6), clamp(x / 20 - 0.5, 0, 1))
            },
            effectDisplay: x => x < 0.1 ? "/" + formatWhole(1 / x, 1) : formatWhole(x * 100, 1) + "%",
            visible: () => game.ascensionPoints > 0,
            req: () => game.ascensionPoints >= 500,
            reqDisplay: "500 AP",
            cost: x => 2000 * 1.25 ** Math.max(x, 0.05 * x ** 1.8),
            costType: "artifacts",
            keepOn: ["ascension"],
        },
        14: {
            row: 0, col: -1,
            title: "Critical taps",
            desc: "Chance to deal 5x damage on tap",
            effect: x => 0.02 * x,
            effectDisplay: x => format(x * 100) + "%",
            visible: () => game.ascensionPoints >= 300,
            req: () => game.level >= 850,
            reqDisplay: "Level 850",
            cost: x => 1000000 * 100 ** x,
        },
        15: {
            row: 0, col: -2,
            title: "Companion strike",
            desc: "Chance to deal 25x damage on companion attack",
            effect: x => 0.01 * x,
            effectDisplay: x => format(x * 100) + "%",
            visible: () => game.ascensionPoints >= 400,
            req: () => game.level >= 1000,
            reqDisplay: "Level 1,000",
            cost: x => 1000000000 * 10000 ** x,
        },
        16: {
            row: 4, col: 0,
            title: "<del>Tech</del> Mining startup",
            desc: "Start with better companions upon ascension",
            effect: x => x,
            effectDisplay: x => getToolName("comp", x + 1),
            visible: () => game.ascensionPoints >= 500,
            req: () => game.ascensionPoints >= 750,
            reqDisplay: "750 AP",
            cost: x => getToolCost("comp", x + 1) * (10 + x * x) + 990,
            costType: "artifacts",
            keepOn: ["ascension"],
        },
        17: {
            row: 4, col: 1,
            title: "Spare warehouse",
            desc: "Start with better tools upon ascension",
            effect: x => x,
            effectDisplay: x => getToolName("tool", x + 1),
            visible: () => game.ascensionPoints >= 600,
            req: () => game.ascensionPoints >= 1000,
            reqDisplay: "1,000 AP",
            cost: x => getToolCost("tool", x + 1) ** 2 * (x + 1) ** 2 * 1e9,
            keepOn: ["ascension"],
        },
        18: {
            row: 4, col: -1,
            title: "Venture capital funding",
            desc: "Start with extra cash upon ascension",
            effect: x => x * 1000 ** (x ** 0.5),
            effectDisplay: x => "$" + format(x),
            visible: () => game.ascensionPoints >= 900,
            req: () => game.ascensionPoints >= 1800,
            reqDisplay: "1,800 AP",
            cost: x => 1e12 * 1000 ** x,
            keepOn: ["ascension"],
        },
        19: {
            row: 0, col: 0,
            title: "Raise the floor",
            desc: "Every artifact used in a tool gives bonus gilding effect (independent from multi)",
            effect: x => 0.5 * x,
            effectDisplay: x => "+" + formatWhole(x, 1) + "%",
            visible: () => game.ascensionPoints >= 1100,
            req: () => game.level >= 1350,
            reqDisplay: "Level 1,350",
            cost: x => 666666666 * 66666 ** x,
        },
        20: {
            row: 0, col: 2,
            title: "Bullseye touch",
            desc: "Increase critical tap stack limit<br/>(Chance decays for each crit)",
            effect: x => 1 + x,
            effectDisplay: x => "x" + format(x),
            visible: () => game.ascensionPoints >= 1500,
            req: () => game.level >= 2400,
            reqDisplay: "Level 2,400",
            cost: x => 999e9 * (99999 ** x) * 9 ** ((x + 1) ** 2),
        },
        21: {
            row: 0, col: 1,
            title: "Companion swarm",
            desc: "Increase companion strike stack limit<br/>(Chance decays for each crit)",
            effect: x => 1 + x,
            effectDisplay: x => "x" + format(x),
            visible: () => game.ascensionPoints >= 2000,
            req: () => game.level >= 4000,
            reqDisplay: "Level 4,000",
            cost: x => 999e12 * (9999999999 ** x) * 9 ** ((x + 1) ** 4),
        },
        22: {
            row: 3, col: 2,
            title: "Artifact superpower",
            desc: "Artifact duplication count in above upgrade's effect is raised to a power",
            effect: x => 1 + x * 0.2,
            effectDisplay: x => "^" + formatWhole(x, 1),
            visible: () => game.ascensionPoints >= 1000,
            req: () => game.ascensionPoints >= 2500,
            reqDisplay: "2,500 AP",
            cost: x => x >= 15 ? Infinity : 1e12 * 1000 ** (x ** 1.1 * 1.1 ** x),
            keepOn: ["ascension"],
        },
        23: {
            row: 3, col: -2,
            title: "Artifact novelty",
            desc: "Multiplies artifact gain from new ores",
            effect: x => 0.15 * (x ** 1.4) + 1,
            effectDisplay: x => format(x * 100) + "%",
            visible: () => game.ascensionPoints >= 1200,
            req: () => game.ascensionPoints >= 5000,
            reqDisplay: "5,000 AP",
            cost: x => 1e9 * 100 ** (x ** 1.2),
            keepOn: ["ascension"],
        },
        $all: {
            row: 4, col: -2,
            visible: () => game.minerSoulTotal >= 5000,
        },
        $next: {
            visible: () => game.minerSoulTotal > 0,
        }
    },
    reincarnation: {
        1: {
            row: 2, col: -2,
            title: "Extra money",
            desc: "Multiplies cash gain",
            effect: x => 5 ** x,
            effectDisplay: x => "x" + format(x),
            req: () => true,
            reqDisplay: "",
            cost: x => 75 * (x + 2) * 2 ** x,
            costType: "minerSouls",
        },
        2: {
            row: 2, col: -1,
            title: "Extra artifacts",
            desc: "Multiplies artifact gain",
            effect: x => (x ** 1.3) + 1,
            effectDisplay: x => "x" + format(x),
            req: () => true,
            reqDisplay: "",
            cost: x => 125 * (x + 2) * 2 ** x,
            costType: "minerSouls",
        },
        3: {
            row: 2, col: 0,
            title: "Extra souls",
            desc: "Multiplies miner's soul gain",
            effect: x => (x ** 1.3) + 1,
            effectDisplay: x => "x" + format(x),
            req: () => game.upgradesBought.reincarnation?.[1] >= 1,
            reqDisplay: "1 of Extra money",
            cost: x => 400 * 5 ** x,
            costType: "minerSouls",
        },
        4: {
            row: 2, col: 1,
            title: "Buffed companions",
            desc: 'Increase "Stronger companions" upgrade\'s effectiveness',
            effect: x => 1 + 0.2 * x,
            effectDisplay: x => "^" + formatWhole(x, 1),
            req: () => true,
            reqDisplay: "",
            cost: x => 250 * 3 ** (x ** 1.2),
            costType: "minerSouls",
        },
        5: {
            row: 2, col: 2,
            title: "Buffed tools",
            desc: 'Increase "Sharper touches" upgrade\'s effectiveness',
            effect: x => 1 + 0.2 * x,
            effectDisplay: x => "^" + formatWhole(x, 1),
            req: () => true,
            reqDisplay: "",
            cost: x => 250 * 3 ** (x ** 1.2),
            costType: "minerSouls",
        },
    }
}